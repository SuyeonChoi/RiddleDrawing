<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

  이름: <input type="text" name="이름" id="name"><br>
  점수:<input type="text" name="점수" id="score"><br>
  <input type="submit" id="sub"/>


<script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC0OtPgwmEXf-V6wFhXoj4xf5Ppx9PnprY",
    authDomain: "riddledrawing.firebaseapp.com",
    databaseURL: "https://riddledrawing.firebaseio.com",
    projectId: "riddledrawing",
    storageBucket: "",
    messagingSenderId: "905052321599",
    appId: "1:905052321599:web:caf9352c3b7ddb3a"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  // var auth=firebase.auth();
  // var authProvider=new firebase.auth.GoogleAuthProvider();
  // auth.signInWithPopup(authProvider);
  // auth.onAuthStateChanged(function(user){
  //   if(user){
  //     console.log("success");
  //     console.log(user);
  //   }
  //   else{
  //     auth.signInWithPopup(authProvider);
  //   }
  // });
  /*
   {
     users: {
        name:{score:'점수'}
        name:{score:'점수'}
        name:{score:'점수'}
      }
   }
  */
  var dataRef=firebase.database().ref('users/' + name);
  function get_data(){
    dataRef.on('child_added',function(data){
      console.log(data.val());
    });
  }
  alert(get_data());
  function upload(){
    var name=$('#name').val();
    var score=$('#score').val();
    var dataRef=firebase.database().ref('users/' + name);
    dataRef.push({
    score:score
  });
  }
  $('document').ready(function () {
      $('#sub').click(function () {
          upload();
          });
      });
</script>
</body>
</html>
